# Feature
1.Http 1.0：无状态（不跟踪不记录请求过的状态），无连接（每次请求都建立连接），不能复用，且 TCP 连接释放开销大，性能低，有堵塞（下个请求响应到达才能发送）。  
2.Http 1.1：长连接，支持请求管道化（并行请求，但还是有序的，只是队列由 C 端移到了 S 端）  
3.Http 2.0：引入帧概念，消息由一个或多个帧组成，承载双向消息，数据流以消息的形式发送，拥有唯一 ID。采用二进制传输帧，可以多路复用（同时发送多个请求，S 端不会按顺序执行，执行完的返回 C 端结果），所以没有阻塞，同一域名下的请求都通过一个 TCP 连接来并发完成。
# Http/Https difference
两种协议，Https 基于 SSL（现在是TSL）加密传输，需要申请证书，端口为 443  
Http 连接为无状态，明文传输，端口为 80  
Https 提供了内容的完整性校验，内容对称加密（一个连接生成唯一密钥）
# Foundation
1.Http 属于应用层协议，负责定义数据格式，TCP 用于传输层进行数据传输，IP 用于网络层完成寻址，socket 是对 TCP/IP 的封装  
2.TCP 面向连接（三次握手），速度慢，可靠，一对一，有序（会对消息传输重排序），有流量控制（基于滑动窗口的拥塞控制，窗口大小为无需等待确认可以继续发送数据的最大值，发送方等待确认返回前，缓冲区保留已发送的数据，收到确认后从缓冲区清除），面向字节流  
3.UDP 无连接，速度快，不可靠，一对多，无序，面向报文，请求报文分为请求头（存储客户端信息的键值对以及一些填充符号（如换行））、请求行（http 版本，请求方法，请求 URL）和请求体（实际要执行的请求）  
4.响应报文为响应行（http 版本，状态码和状态描述）、响应头（键值对存储 S 端信息）和响应体（键值对，返回请求数据）  
5.get 请求一个指定资源的表达形式，用于获取数据，参数包含 URL，明文不安全，限制 2KB（URL 长度在 2K 字节），请求被浏览器主动 cache，请求参数完整保留在历史记录，只发生一次包（浏览器会把 http header 和数据一起发送）   
6.post 将实体提交到指定资源，可能引起 S 端状态变化，requestBody 传递参数，安全，不限制大小，一般发送两次包（浏览器先发送 header，S 端响应后再发送数据）  
# TCP 三次握手四次挥手
## 三次握手
1.A向B发出连接请求，同步位 SYN=1，选择一个初始序列号 seq=x；（SYN 报文段不能携带数据，需要消耗一个序列号），A 进入 SYN-SENT（同步已发送）状态。  
2.B 收到连接请求，同意建立连接则向 A 发送确认。 同步位 SYN=1、确认位 ACK=1、确认号 ack=x+1（对接收的序列号 seq=x 的报文段进行确认，并期望接收的下一个报文段的序号 seq=x+1），同时选择一个初始序列号 seq=y，B 进入 SYN-RCVID 状态。（该报文段是 ACK 报文段的同时也是 SYN 报文段，不能携带数据）  
3.A 收到 B 确认，再向 B 发出确认。确认报文 ACK=1、确认号 ack=y+1（对接收的序列号 seq=y 的报文段进行确认，并期望接收的下一个报文段的序号 seq=y+1）。A 进入 ESTAB-LISHED 状态，B 接收到 A 的确认后，进入 ESTAB-LISHED 状态，连接建立完成
## 为什么不是两次
防止已失效的连接请求报文段突然又传送到了 B，从而造成资源浪费
## 四次挥手
1.A 发送连接释放报文段，终止控制位 FIN=1，序号 seq=u（A 前面发送数据的最后一个序号加 1），进入 FIN-WAIT-1（终止等待 1）状态，等待 B 确认。（FIN 报文段即使不携带数据也要消耗一个序列）  
2.B 收到 A 的连接释放，发出确认报文段，确认号 ack=u+1，序号 seq=v（等于 B 前面发送数据的最后一个序号加 1），进入 CLOSE-WAIT（关闭等待）状态。（TCP 服务器这时会通知高层应用进程，从 A 到 B 这个方向的连接就断开了，这时 TCP 连接处于半关闭（half-close）状态；B 到 A 方向连接没断，可以向 A 发送数据）  
3.A 收到 B 确认报文段后进入到 FIN-WAIT-2（终止等待 2）状态，等待 B 发出连接释放报文段；若 B 没有数据发送，B 向 A 发送连接释放报文段，终止控制位 FIN=1，序号 seq=w（半关闭状态可能又发送了一些数据），确认号 ack=u+1，B 进入 LAST-ACK（最后确认）状态，等待 A 确认。（ack 没变，仍为上次发送的确认 u+1）  
4.A 收到 B 连接释放报文段并发出确认，确认位 ACK=1，确认号 ack=w+1，序号 seq=u+1；然后 A 进入到 TIME-WAIT（时间等待）状态。B 再接收到该确认段后，B 进入 CLOSED 状态。
# DNS 寻址
1.查看浏览器缓存  
2.查看系统缓存  
3.查看路由器缓存  
4.查看ISP DNS（运营商） 缓存  
5.询问根域名服务器  
6.询问顶级域名服务器  
7.询问权威域名（主域名）服务器  
8.保存结果至缓存
# 浏览器输入地址到最终显示页面
1.浏览器查询 DNS,获取域名对应的 ip 地址  
2.获取 ip 地址后，浏览器向服务器建立连接请求，发起三次握手请求  
3.连接建立好之后，浏览器向服务器发起 http 请求  
4.服务器收到请求之后，根据路径的参数映射到特定的请求处理器进行处理，并将处理结果以及相应的视图返回给浏览器  
5.浏览器解析并渲染视图，若遇到 js、css 以及图片等静态资源，则重复向服务器请求相应资源  
6.浏览器根据请求到的数据，资源渲染页面最终将完整的页面呈现在浏览器上  
